\documentclass{article}

\input{preamble.tex}


\def\icml{1}

\if\icml1
\input{icml_preamble.tex}
\else
\input{neutral_preamble.tex}
\fi

\begin{document}

\begin{bibunit}


\if\icml1
\input{icml_heading.tex}
\else
\input{neutral_heading.tex}
\fi

\begin{abstract}
  \input{abstract.tex}
\end{abstract}

\if\icml0
\medskip
\fi

\input{introduction.tex}

\input{related.tex}

\input{setting.tex}

\input{method.tex}

\input{analysis.tex}

\input{experiments.tex}

\input{conclusion.tex}

\if\icml0
\section{Acknowledgements}
This work was supported by the European Research Council (ERC project NORIA). A.M thanks Anna Korba for helpful discussions on mirror descent algorithms, and Thibault Séjourné for suggesting relevant references.
\fi

\putbib
\end{bibunit}

\appendix

\begin{bibunit}

\onecolumn

\input{appendix.tex}

\putbib

\end{bibunit}

\end{document}